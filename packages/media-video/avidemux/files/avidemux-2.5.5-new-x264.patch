Source: https://lists.berlios.de/pipermail/avidemux-svn-commit/2011-June/004440.html
Upstream: yes, revision 7288
Reason: build with new x264

--- avidemux_2.5.5//plugins/ADM_videoEncoder/ADM_vidEnc_x264/encoder.cpp	2010-10-03 18:54:51.000000000 +0200
+++ avidemux_2.5_branch_gruntster//plugins/ADM_videoEncoder/ADM_vidEnc_x264/encoder.cpp	2011-07-10 07:36:03.173943654 +0200
@@ -488,7 +488,10 @@
 	printf("[x264] analyse.b_transform_8x8 = %d\n", x264Param->analyse.b_transform_8x8);
 	printf("[x264] analyse.inter = %d\n", x264Param->analyse.inter);
 	printf("[x264] b_cabac = %d\n", x264Param->b_cabac);
-#if X264_BUILD > 101
+#if X264_BUILD > 114
+	printf("[x264] b_open_gop = %d\n", x264Param->b_open_gop);
+	printf("[x264] b_bluray_compat = %d\n", x264Param->b_bluray_compat);
+#elif X264_BUILD > 101
 	printf("[x264] i_open_gop = %d\n", x264Param->i_open_gop);
 #endif
 	printf("[x264] b_interlaced = %d\n", x264Param->b_interlaced);
Only in avidemux_2.5_branch_gruntster//plugins/ADM_videoEncoder/ADM_vidEnc_x264/gtk: .svn
Only in avidemux_2.5_branch_gruntster//plugins/ADM_videoEncoder/ADM_vidEnc_x264/qt4: .svn
Only in avidemux_2.5_branch_gruntster//plugins/ADM_videoEncoder/ADM_vidEnc_x264: .svn
--- avidemux_2.5.5//plugins/ADM_videoEncoder/ADM_vidEnc_x264/x264Options.cpp	2010-12-31 22:23:09.000000000 +0100
+++ avidemux_2.5_branch_gruntster//plugins/ADM_videoEncoder/ADM_vidEnc_x264/x264Options.cpp	2011-07-10 07:36:03.174943154 +0200
@@ -420,13 +420,34 @@
 #if X264_BUILD > 101
 unsigned int x264Options::getOpenGopMode(void)
 {
+#if X264_BUILD > 114
+	if (_param.b_open_gop == 1)
+	{
+		if (_param.b_bluray_compat == 1)
+		{
+			return 2;
+		}
+		else
+		{
+			return 1;
+		}
+	}
+
+	return 0;
+#else
 	return _param.i_open_gop;
+#endif
 }
 
 void x264Options::setOpenGopMode(unsigned int openGopMode)
 {
+#if X264_BUILD > 114
+	_param.b_open_gop = (openGopMode > 0 ? 1 : 0);
+	_param.b_bluray_compat = (openGopMode == 2 ? 1 : 0);
+#else
 	if (openGopMode < 3)
 		_param.i_open_gop = openGopMode;
+#endif
 }
 #endif
 
 