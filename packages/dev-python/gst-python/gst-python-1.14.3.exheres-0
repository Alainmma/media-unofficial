# Copyright 2017 Rasmus Thomsen <Rasmus.thomsen@protonmail.com>
# Distributed under the terms of the GNU General Public License v2
# Based in part upon 'gst-python-0.10.22-r2.exheres-0', which is:
#     Copyright 2009 Sterling X. Winter <sterling.winter@gmail.com>

require python [ blacklist=none ]

SUMMARY="GStreamer Python bindings (complementing the gobject-introspection
    based bindings)"
HOMEPAGE="https://gstreamer.freedesktop.org/"
DOWNLOADS="https://gstreamer.freedesktop.org/src/${PN}/${PNV}.tar.xz"

LICENCES="LGPL-2.1"
SLOT="1.0"
PLATFORMS="~amd64 ~x86"
MYOPTIONS=""

# TODO: figure out how to make it work
RESTRICT="test"

DEPENDENCIES="
    build:
        virtual/pkg-config
    build+run:
        dev-libs/libxml2:2.0
        gnome-bindings/pygobject:3[>=3.8][python_abis:*(-)?]
        media-libs/gstreamer:1.0[>=${PV}][gobject-introspection]
        media-plugins/gst-plugins-base:1.0[>=${PV}][gobject-introspection]
"

configure_one_multibuild() {
    # Required for it to not install into /usr/lib/pythonx.x
    econf \
        --with-pygi-overrides-dir=$(python_get_sitedir)/gi/overrides/
}

